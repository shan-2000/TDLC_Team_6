# Drowsy Driver Detection

## Introduction

Driver drowsiness detection is a car safety technology which helps prevent accidents caused by the driver getting drowsy. Various studies have suggested that around 20% of all road accidents are fatigue-related, up to 50% on certain roads. Drivers must keep a close eye on the road, so they can react to sudden events immediately. Driver fatigue often becomes a direct cause of many traffic accidents. Therefore, there is a need to develop the systems that will detect and notify a driver of her/him bad psychophysical condition, which could significantly reduce the number of fatigue-related car accidents. However, the development of such systems encounters many difficulties related to fast and proper recognition of a driver’s fatigue symptoms. One of the technical possibilities to implement driver drowsiness detection systems is to use the vision-based approach. This article presents the currently used driver drowsiness detection systems. The technical aspects of using the vision system to detect a driver drowsiness are also discussed. Nowadays, more and more professions require long-term concentration. Drivers must keep a close eye on the road, so they can react to sudden events immediately. Driver fatigue often becomes a direct cause of many traffic accidents. Therefore, there is a need to develop the systems that will detect and notify a driver of her/him bad psychophysical condition, which could significantly reduce the number of fatigue-related car accidents. However, the development of such systems encounters many difficulties related to fast and proper recognition of a driver’s fatigue symptoms.In recent years, driver drowsiness has been one of the major causes of road accidents and can lead to severe physical injuries, deaths and significant economic losses. Statistics indicate the need of a reliable driver drowsiness detection system which could alert the driver before a mishap happens. A number of road accidents might then be avoided if an alert is sent to a driver that is deemed drowsy.Drowsy driving is a major problem . The risk, danger, and often tragic results of drowsy driving are alarming. Drowsy driving is the dangerous combination of driving and sleepiness or fatigue. This usually happens when a driver has not slept enough, but it can also happen because of untreated sleep disorders, medications, drinking alcohol, or shift work.No one knows the exact moment when sleep comes over their body. Falling asleep at the wheel is clearly dangerous but being sleepy affects your ability to drive safely even if you don’t fall asleep. 

Drowsiness:

Makes you less able to pay attention to the road.

Slows reaction time if you must brake or steer suddenly.

Affects your ability to make good decisions.

## Application:
### - The action of putting something into operation

• This system can be used in factories to alert
the workers.

• If found drowsy, the alarm system gets
activated and the driver is alerted.

• If there is any obstacles it is alerted to the driver.

• This system can also be used for railway
drivers.

## Objective:
### - Goal of a project

 The main objective of the proposed system is to provide security to a drivers when he is drunken and he feels drowsy. 
 
## Research:
### - The systematic investigation into and study of materials and sources in order to establish facts and reach new conclusions
 
  ![research](https://user-images.githubusercontent.com/94229525/146387206-9adbc10f-401d-4bf3-a25d-507036413de2.jpg)
 
             Existing                                          Implemented
             * In earlier stage their is                       * The main aim of our project is 
              no innovation about automation                     to save an driver and passengers 
             So it would became impossible                       from the accident when they use to travel
             to help human from accident while                    with sleepiness.
             driving.                                            *The device continuously monitors the driver 
                                                                 eye blinking rate If it detects the drowsiness in person.
             * Not even invented any different types
             of vehicle like nowadays with all facilities.                   
                                                                   *The sensor has to turn on alarm/beep.And the heartbeat rate also 
                                                                   detects the heartbeat of the person who use to drive with some heart problem
                                                                   so that it saves his/her life.Gsm module has to send imediate message to blood relatives will 
                                                                   be implemented in future.If all the above requirements meets their condition it should stop the
                                                                   vehicle immediately.

## 4W and 1H:
### - Is used to comprehend for details, analyze inferences and judgment to get to the fundamental facts and guide statements to get to the abstraction

### __WHO:__ 
* The people those who are working in the dangerous area can use this product to avoid accident due carelessness. 
Several manufacturers, including Audi, Mercedes and Volvo, currently offer drowsiness detection systems that monitor a vehicle's movements, such as steering wheel angle, lane deviation, time driven and road conditions.

### __WHAT:__
* Drowsiness detection is a safety technology that can prevent accidents that are caused by drivers who fell asleep while driving.This system will alert the driver when drowsiness is detected.
* This product is nothing but the alerting system for vehicle driver whenever the driver feeling sleepy the system will give the aleart message. So the posibilities of occuring accidents are low.
* This is why Mercedes-Benz has developed the innovative ATTENTION ASSIST system, which can detect when drivers start to become drowsy and prompt them to take a break before it's too late.likely to suffer a lapse in attention.

### __WHEN:__
* People can use this product when there is a need of providing extra safeness in accident prone areas. 
*Feeling abnormally sleepy or tired during the day is commonly known as drowsiness. Drowsiness may lead to additional symptoms, such as forgetfulness or falling asleep at inappropriate times ,during driving,Drowsiness, also called excess sleepiness, can be accompanied by lethargy, weakness, and lack of mental agility. While most people feel drowsy at some point or another, persistent sleepiness or fatigue, especially at inappropriate times, can indicate a sleep disorder or other medical problem.

### __WHERE:__
* It mostly happens when the driver feels asleep and drowsy inside the car when he is driving.So,Several manufacturers, including Audi, Mercedes and Volvo, currently offer drowsiness detection systems that monitor a vehicle's movements, such as steering wheel angle, lane deviation, time driven and road conditions.

### __HOW:__
* The driver drowsiness detection is based on an algorithm, which begins recording the driver's steering behavior the moment when the driver starts to drive. It then recognizes changes over the course of long journeys, and thus also the driver's level of fatigue.
* A driver who falls asleep at the wheel loses control of the vehicle, an action which often results in a crash with either another vehicle or stationary objects. In order to prevent these devastating accidents, the state of drowsiness of the driver should be monitored.
* If it detects driving behavior consistent with a drowsy driver, the system uses an audible chime sound and displays an amber coffee cup with a message reading, "Take a break?" in the vehicle's information display.DAA is only a warning to inform the driver of a potential lack of driver attention or drowsiness.
How does it work? Driver-monitoring systems typically use a driver-facing camera equipped with infrared light-emitting diodes (LEDs) or lasers so that it can “see” the driver's face, even at night, and see the driver's eyes even if the driver is wearing dark sunglasses.

## SWOT Analysis
### - A study undertaken by an organization to identify its internal strengths and weaknesses, as well as its external opportunities and threats

![SWOT](https://user-images.githubusercontent.com/94435852/146313765-bc7fda2d-e778-4258-aea6-2e9fd74e35c9.PNG)


## High level requirements
### - Describes a set of capabilities which a project under consideration must achieve

|HLR ID|Description|Implemented/Furure|
|------|-----------|------------------|
|HLR_1|When ever driver is drowsy, an alarm needs to be triggered|Future|
|HLR_2|When Vehicle catches fire, windows need to be opened automatically|Future|
|HLR_3|If driver consumes alcohol,vehicle has to be automatically stop|Future|
|HLR_4|If the GSM module get failure it need not send messages|Future|
|HLR_5|Heart beat sensor very much need for heart patient,workers of thermal station and fire service workers|Future|
|HLR_6|Incase if heart beat rate is too high of passengers or person inside vehicle due to anxiesty attack the gsm module has to respond immediately by sending message|Future|


## Low level requirements
### - Specific functionality that define what a system is supposed to accomplish in order to meet the high-level software requirements

|LLR ID|Description|Implemented/Furure|
|------|-----------|------------------|
|LLR1_HLR_1|An eye blink sensor has to continuously monitor eye blinking|Future|
|LLR2_HLR_1|When eye blinking rate is high then alarm need to be triggered|Future|
|LLR2_HLR_1|An warning message has to be displayed on the LCD display|Future|
|LLR1_HLR_2|A fire sensor that connected to the microcontroller continiously moniter the temparature|Future|
|LLR2_HLR_2|The temparature sensor has to be connected to the window control.|Future|
|LLR3_HLR_2|When temparature is too high, it has to consider that fire present in vehicle and give input to the window control|Future|
|LLR4_HLR_2|After taking the input from fire sensor, windows control has to open the windows|Future|
|LLR1_HLR_3|A alcohol sensor conneted to the microcontroller continuosly moniter the alcohol presence in vehicle|Future|
|LLR2_HLR_3|If the alcohol gas  detected then it gives input to the ignition relay|Future|
|LLR3_HLR_3|Than ignition relay has off so the vehicle stoped automatically|Future|

## Advantages

 1. Security of vehicle. 
 2. Record driving data, collision data and position data. 
 3. Analyze the accidents detail. 
 4. Send location of car and its maintenance to base station through GPS & GSM technique. 
 5. Sense gas & fuel leakage and display its status on car monitoring system. 
 6. Detect if the driver is drunk or not. 
 7. Detect if the driver is feeling sleepy.
 8. The detected abnormal behavior is
corrected through alarms in real time.
 9. Life of the driver can be saved by alerting
him using the alarm system.
 10. Speed of the vehicle can be controlled.
 11. Traffic management can be maintained by
reducing accidents.

 ## Disadvantages

 1. Damage of sensor cannot be detected.
 2. Vehicle based measures mostly affected by the
 geometry of road which sometimes unnecessarily.
 activate the alarming system.
 3. The driving style of the current driver needs
 to be learned and modeled for the system to
 be efficient.
 4. The condition like micro sleeping which mostly happens
 in straight highways cannot be detected. 




# TEST PLAN
### - It is a detailed document that catalogs the test strategy, objectives, schedule, estimations, deadlines, and the resources required for completing that particular project.

### High Level Test plan:

| ID    | Description                             | Expected O/P | Actual O/P | Type of Test |
|-------|-----------------------------------------| ------------ | ---------- | ------------ |
| H_01  |Detect Human eye blinking                |Detecting     |SUCCESS     | Requirement  |
| H_02  |Display  detected message in LCD board   |Displaying    |SUCCESS     | Scenario     |
| H_03  |If GSM got failure it won't send messages|failed        |Work processing| Future  |
| H_04  |Heart beat sensor have to record rate of heart beat|Recoring         |Activate GSM to send message| Implemented  |
| H_05  |Process Off                              |stop          |SUCCESS     | Implemented  |


### Low Level Test Plan:

| ID    | Description                               | Expected O/P                            | Actual O/P | Type of Test | 
|-------|-----------------------                    | ------------                            | -----------| ------------ |
| L_01  |Identify and sense alcohol gas             | gas sensor Detected                     |SUCCESS      | Requirement  |
| L_02  |Fire sensor senses temperature             | high pass input to ignition relay       |SUCCESS      | Scenario     |
| L_03  |IR sensor senses the objects attitude      | Detecting Drowsy by eye blik rate       |SUCCESS      | Scenario     |
| L_04  |Heart beat sensor to sense heart beat rate | Heart beat rate high/low                |SUCCESS      | Scenario     |
| L_05  |if every sensor activate and results found | Automatically stop vehicle              |SUCCESS      | Implemented  |


## HIGH LEVEL DIAGRAM 
### -  It describes the overall description/architecture of the application. It includes the description of system architecture, data base design, brief description on systems, services, platforms and relationship among modules.

## Flow chart


![HIGH LEVEL](https://user-images.githubusercontent.com/94435852/146064544-b074d3c2-0018-43d2-8ed3-708637f6160a.png)

## Use case diagram

![image](https://user-images.githubusercontent.com/94309132/146013080-100331c8-08f7-49f6-b024-8e5f48d1ad11.png)


## LOW LEVEL DIAGRAM
### - It describes detailed description of each and every module means it includes actual logic for every system component and it goes deep into each modules specification. 

## Flow chart.

![LOW LEVEL](https://user-images.githubusercontent.com/94435852/146064562-b12912e5-847f-4ee1-ab37-3ef438335961.jpeg)

## Class Diagram

![image](https://user-images.githubusercontent.com/94309132/146014374-0f812b0f-bcf0-4321-b9f1-c5d1d97053e8.png)



# Components used for simulation :

## ATmega32 Microcontroller :

![image](https://user-images.githubusercontent.com/94309132/145758270-b5a9d6d3-a7a1-41be-b100-dc562dda9c58.png)

![image](https://user-images.githubusercontent.com/94309132/145758298-a7b1df75-3523-4ecd-9711-0c6add032adc.png)

## Pin Descriptions:
### Port A (PA7-PA0): 
Port A serves as analog inputs for A/D converter. It also acts as an 8-bit bidirectional I/O port if the A/D converter is not used internally.

### Port B (PB7-PB0) and Port D (PD7-PD0):
These ports are 8-bit bidirectional I/O ports. Their output buffers have symmetrical drive characteristics with high source and sink capability. As inputs, these are pulled low if the pull-up resistors are used. It also provides various special functional features of the ATmega32.

### Port C (PC7-PC0): 
Port C is an 8-bit bidirectional I/O port. If the Joint Test Action Group (JTAG) interface is enabled, the pull-up resistors on pins PC2 (TCK), PC3 (TMS), and PC5 (TDI) will be activated.

### Vcc:  
Digital voltage supply

### GND: 
Ground

### RESET:
It is a RESET pin which is utilized to set the microcontroller ATmega32 to its primary value. During the beginning of an application the RESET pin is to be set elevated for two machine rotations.

### XTAL1:
It is an input for the inverting oscillator amplifier and input to an internal clock operating circuit.

### XTAL2: 
It is an output from an inverting oscillator amplifier.

### AVcc:
It is a supply voltage pin for A/D converter and Port A. It must be connected with Vcc.

### AREF:
AREF is an analog signal reference pin for the analog to digital converter.

## Key Features:
Consider some general features of ATmega32 microcontroller is:-

* 2 Kilo bytes of internal Static RAM
* 32 X 8 general working purpose registers
* 32 Kilo bytes of in system self programmable flash program memory.
* 1024 bytes EEPROM
* Programmable serial USART
* 8 Channel, 10 bit ADC
* One 16-bit timer/counter with separate prescaler, compare mode and capture mode.
* Available in 40 pin DIP, 44-pad QFN/MLF and 44-lead QTFP
* Two 8-bit timers/counters with separate prescalers and compare modes
* 32 programmable I/O lines
* In system programming by on-chip boot program
* Master/slave SPI serial interface
* 4 PWM channels
* Programmable watch dog timer with separate on-chip oscillator
* Special Microcontroller Features:
* External and internal interrupt sources
* Six sleep modes: Idle, ADC noise reduction, power-save, power-down, standby and extended standby.
* Power on reset and programmable brown-out detection.
* Internal calibrated RC oscillator

## LCD 16×2 Pin:

![image](https://user-images.githubusercontent.com/94309132/145758679-9869a9e7-e105-465a-9ea4-d901f346c160.png)

![image](https://user-images.githubusercontent.com/94309132/145758772-bbae2d4b-3797-4edb-a42e-a77cd86c47b1.png)




## LCD 16×2 Pin Description: 
The 16×2 LCD pinout is shown below.

###  Pin1 (Ground/Source Pin):
This is a GND pin of display, used to connect the GND terminal of the microcontroller unit or power source.
###  Pin2 (VCC/Source Pin): 
This is the voltage supply pin of the display, used to connect the supply pin of the power source.
###  Pin3 (V0/VEE/Control Pin):
This pin regulates the difference of the display, used to connect a changeable POT that can supply 0 to 5V.
###  Pin4 (Register Select/Control Pin): 
This pin toggles among command or data register, used to connect a microcontroller unit pin and obtains either 0 or 1(0 = data mode, and 1 = command mode).
###  Pin5 (Read/Write/Control Pin): 
This pin toggles the display among the read or writes operation, and it is connected to a microcontroller unit pin to get either 0 or 1 (0 = Write Operation, and 1 = Read Operation).
###  Pin 6 (Enable/Control Pin): 
This pin should be held high to execute Read/Write process, and it is connected to the microcontroller unit & constantly held high.
### Pins 7-14 (Data Pins):
These pins are used to send data to the display. These pins are connected in two-wire modes like 4-wire mode and 8-wire mode. In 4-wire mode, only four pins are connected to the microcontroller unit like 0 to 3, whereas in 8-wire mode, 8-pins are connected to microcontroller unit like 0 to 7.
###  Pin15 (+ve pin of the LED): 
This pin is connected to +5V
### Pin 16 (-ve pin of the LED): 
This pin is connected to GND



## Features of LCD16x2
The features of this LCD mainly include the following.

* The operating voltage of this LCD is 4.7V-5.3V
* It includes two rows where each row can produce 16-characters.
* The utilization of current is 1mA with no backlight
* Every character can be built with a 5×8 pixel box
* The alphanumeric LCDs alphabets & numbers
* Is display can work on two modes like 4-bit & 8-bit
* These are obtainable in Blue & Green Backlight
* It displays a few custom generated characters



## Flame Sensor:

![image](https://user-images.githubusercontent.com/94309132/146133138-e06e5f5e-06f7-4bb0-8d81-32a374102395.png)


## Pin Description :


### Pin1 (VCC pin): 
Voltage supply rages from 3.3V to 5.3V
### Pin2 (GND): 
This is a ground pin
### Pin3 (AOUT): 
This is an analog output pin (MCU.IO)
### Pin4 (DOUT): 
This is a digital output pin (MCU.IO)


## Features & Specifications

The features of this sensor include the following.

* Photosensitivity is high
* Response time is fast
* Simple to use
* Sensitivity is adjustable
* Detection angle is 600,
* It is responsive to the flame range.
* Accuracy can be adjustable
* Operating voltage of this sensor is 3.3V to 5V
* Analog voltage o/ps and digital switch o/ps
* The PCB size is 3cm X 1.6cm
* Power indicator & digital switch o/p indicator
* If the flame intensity is lighter within 0.8m then the flame test can be activated, if the flame intensity is high, then the detection of distance will be improved.


## IR Sensor :

![image](https://user-images.githubusercontent.com/94309132/146134285-8e8c44de-3db3-4d4c-9934-f7b389f00fa9.png)


### VCC
Power Supply Input

### GND
Power Supply Ground

### OUT
Active High Output


## IR Sensor Module Features:
 
* 5VDC Operating voltage
* I/O pins are 5V and 3.3V compliant
* Range: Up to 20cm
* Adjustable Sensing range
* Built-in Ambient Light Sensor
* 20mA supply current
* Mounting hole


## MQ2 Gas Sensor :

![image](https://user-images.githubusercontent.com/94309132/146135671-cc33477f-86fe-4db5-8bf4-f980f9b3797d.png)

![image](https://user-images.githubusercontent.com/94309132/146135725-33679908-0051-4e0c-85c8-639b7d91941a.png)


## Pin Description :

## For Module


### Vcc
This pin powers the module, typically the operating voltage is +5V

### Ground
Used to connect the module to system ground

### Digital Out
You can also use this sensor to get digital output from this pin, by setting a threshold value using the potentiometer

### Analog Out
This pin outputs 0-5V analog voltage based on the intensity of the gas 

## For Sensor


## H -Pins
Out of the two H pins, one pin is connected to supply and the other to ground

## A-Pins
The A pins and B pins are interchangeable. These pins will be tied to the Supply voltage.

## B-Pins
The A pins and B pins are interchangeable.   One pin will act as output while the other will be pulled to ground.



## References

 1. ![DROWSY DRIVING AND AUTOMOBILE CRASHES](http://www.nhtsa.dot.gov/people/injury/drowsy_driving1/drowsy.html)
		
 2. ![Federal Motor Carrier Safety Administration](http://www.fmcsa.dot.gov/)
		
 3. ![BGU – Introduction to Computational and Biological Vision course](http://www.cs.bgu.ac.il/~icbv071/LectureNotes/ICBV-Lecture-Notes-41)- Perceptual-Organization-1-Edge-Aggregetion-Case-Study-1SPP.pdf (http://www.thesecrettosoundsleep.com/)


